(*
 * Summary: interface for all global variables of the library
 * Description: all the global variables and thread handling for
 *              those variables is handled by this module.
 *
 * The bottom of this file is automatically generated by build_glob.py
 * based on the description file global.data
 *
 * Copy: See Copyright for the status of this software.
 *
 * Author: Gary Pennington <Gary.Pennington@uk.sun.com>, Daniel Veillard
 *)

{$IFDEF POINTER}
  xmlGlobalStatePtr = ^xmlGlobalState;
  xmlRegisterNodeFuncPtr = ^xmlRegisterNodeFunc;
  xmlDeregisterNodeFuncPtr = ^xmlDeregisterNodeFunc;
  xmlParserInputBufferCreateFilenameFuncPtr = ^xmlParserInputBufferCreateFilenameFunc;
  xmlOutputBufferCreateFilenameFuncPtr = ^xmlOutputBufferCreateFilenameFunc;
{$ENDIF}

{$IFDEF FUNCTION}
procedure xmlInitGlobals; XMLCALL; XMLPUBFUN;
procedure xmlCleanupGlobals; XMLCALL; XMLPUBFUN;
{$ENDIF}

{$IFDEF TYPE}
  xmlParserInputBufferCreateFilenameFunc = function(URI: pchar; enc: xmlCharEncoding): xmlParserInputBufferPtr; XMLCALL;
  xmlOutputBufferCreateFilenameFunc = function(URI: pchar; encoder: xmlCharEncodingHandlerPtr; compression: cint): xmlOutputBufferPtr; XMLCALL;
{$ENDIF}

{$IFDEF FUNCTION}
function xmlParserInputBufferCreateFilenameDefault(func: xmlParserInputBufferCreateFilenameFunc): xmlParserInputBufferCreateFilenameFunc; XMLCALL; XMLPUBFUN;
function xmlOutputBufferCreateFilenameDefault(func: xmlOutputBufferCreateFilenameFunc): xmlOutputBufferCreateFilenameFunc; XMLCALL; XMLPUBFUN;
{$ENDIF}

(*
 * Externally global symbols which need to be protected for backwards
 * compatibility support.
 *)

{$IFDEF TYPE}
  xmlRegisterNodeFunc = procedure(node: xmlNodePtr); XMLCALL;
  xmlDeregisterNodeFunc = procedure(node: xmlNodePtr); XMLCALL;

  xmlGlobalState = record
    xmlParserVersion                        : pchar;

    xmlDefaultSAXLocator                    : xmlSAXLocator;
    xmlDefaultSAXHandler                    : xmlSAXHandlerV1;
    docbDefaultSAXHandler                   : xmlSAXHandlerV1;
    htmlDefaultSAXHandler                   : xmlSAXHandlerV1;

    xmlFree                                 : xmlFreeFunc;
    xmlMalloc                               : xmlMallocFunc;
    xmlMemStrdup                            : xmlStrdupFunc;
    xmlRealloc                              : xmlReallocFunc;

    xmlGenericError                         : xmlGenericErrorFunc;
    xmlStructuredError                      : xmlStructuredErrorFunc;
    xmlGenericErrorContext                  : pointer;

    oldXMLWDcompatibility                   : cint;

    xmlBufferAllocScheme                    : xmlBufferAllocationScheme;
    xmlDefaultBufferSize                    : cint;

    xmlSubstituteEntitiesDefaultValue       : cint;
    xmlDoValidityCheckingDefaultValue       : cint;
    xmlGetWarningsDefaultValue              : cint;
    xmlKeepBlanksDefaultValue               : cint;
    xmlLineNumbersDefaultValue              : cint;
    xmlLoadExtDtdDefaultValue               : cint;
    xmlParserDebugEntities                  : cint;
    xmlPedanticParserDefaultValue           : cint;

    xmlSaveNoEmptyTags                      : cint;
    xmlIndentTreeOutput                     : cint;
    xmlTreeIndentString                     : pchar;

    xmlRegisterNodeDefaultValue             : xmlRegisterNodeFunc;
    xmlDeregisterNodeDefaultValue           : xmlDeregisterNodeFunc;

    xmlMallocAtomic                         : xmlMallocFunc;
    xmlLastError                            : xmlError;

    xmlParserInputBufferCreateFilenameValue : xmlParserInputBufferCreateFilenameFunc;
    xmlOutputBufferCreateFilenameValue      : xmlOutputBufferCreateFilenameFunc;
  end;
{$ENDIF}

{$IFDEF FUNCTION}
procedure xmlInitializeGlobalState(gs: xmlGlobalStatePtr); XMLCALL; XMLPUBFUN;
procedure xmlThrDefSetGenericErrorFunc(ctx: pointer; handler: xmlGenericErrorFunc); XMLCALL; XMLPUBFUN;
procedure xmlThrDefSetStructuredErrorFunc(ctx: pointer; handler: xmlStructuredErrorFunc); XMLCALL; XMLPUBFUN;

function xmlRegisterNodeDefault(func: xmlRegisterNodeFunc): xmlRegisterNodeFunc; XMLCALL; XMLPUBFUN;
function xmlThrDefRegisterNodeDefault(func: xmlRegisterNodeFunc): xmlRegisterNodeFunc; XMLCALL; XMLPUBFUN;
function xmlDeregisterNodeDefault(func: xmlRegisterNodeFunc): xmlDeregisterNodeFunc; XMLCALL; XMLPUBFUN;
function xmlThrDefDeregisterNodeDefault(func: xmlRegisterNodeFunc): xmlDeregisterNodeFunc; XMLCALL; XMLPUBFUN;

function xmlDeregisterNodeDefault(func: xmlOutputBufferCreateFilenameFunc): xmlOutputBufferCreateFilenameFunc; XMLCALL; XMLPUBFUN;
function xmlThrDefDeregisterNodeDefault(func: xmlParserInputBufferCreateFilenameFunc): xmlParserInputBufferCreateFilenameFunc; XMLCALL; XMLPUBFUN;

(** DOC_DISABLE *)
(*
 * In general the memory allocation entry points are not kept
 * thread specific but this can be overridden by LIBXML_THREAD_ALLOC_ENABLED
 *    - xmlMalloc
 *    - xmlMallocAtomic
 *    - xmlRealloc
 *    - xmlMemStrdup
 *    - xmlFree
 *)

{$IFDEF LIBXML_THREAD_ALLOC_ENABLED}
{$IFDEF LIBXML_THREAD_ENABLED}
function __xmlMalloc: xmlMallocFuncPtr; XMLCALL; XMLPUBFUN;
{$DEFINE xmlMalloc := __xmlMalloc()^ }
{$ELSE}
var
  xmlMalloc: xmlMallocFunc; XMLPUBVAR;
{$ENDIF}

{$IFDEF LIBXML_THREAD_ENABLED}
function __xmlMallocAtomic: xmlMallocFuncPtr; XMLCALL; XMLPUBFUN;
#define xmlMallocAtomic ( *(__xmlMallocAtomic()))
{$ELSE}
var
  xmlMallocAtomic: xmlMallocFunc; XMLPUBVAR;
{$ENDIF}

{$IFDEF LIBXML_THREAD_ENABLED}
function __xmlRealloc: xmlReallocFuncPtr; XMLCALL; XMLPUBFUN;
#define xmlRealloc ( *(__xmlRealloc()))
{$ELSE}
var
  xmlRealloc: xmlReallocFunc; XMLPUBVAR;
{$ENDIF}

{$IFDEF LIBXML_THREAD_ENABLED}
function __xmlFree: xmlFreeFuncPtr; XMLCALL; XMLPUBFUN;
#define xmlFree ( *(__xmlFree()))
{$ELSE}
var
  xmlFree: xmlFreeFunc; XMLPUBVAR;
{$ENDIF}

{$IFDEF LIBXML_THREAD_ENABLED}
function __xmlMemStrdup: xmlStrdupFuncPtr; XMLCALL; XMLPUBFUN;
#define xmlMemStrdup ( *(__xmlMemStrdup()))
{$ELSE}
var
  xmlMemStrdup: xmlStrdupFunc; XMLPUBVAR;
{$ENDIF}

{$ELSE} (* !LIBXML_THREAD_ALLOC_ENABLED *)
var
  xmlMalloc: xmlMallocFunc; XMLPUBVAR;
  xmlMallocAtomic: xmlMallocFunc; XMLPUBVAR;
  xmlRealloc: xmlReallocFunc; XMLPUBVAR;
  xmlFree: xmlFreeFunc; XMLPUBVAR;
  xmlMemStrdup: xmlStrdupFunc; XMLPUBVAR;
{$ENDIF} (* LIBXML_THREAD_ALLOC_ENABLED *)

{$IFDEF LIBXML_DOCB_ENABLED}
function __docbDefaultSAXHandler: xmlSAXHandlerV1Ptr; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE docbDefaultSAXHandler := __docbDefaultSAXHandler()^ }
{$ELSE}
var
  docbDefaultSAXHandler: xmlSAXHandlerV1; XMLPUBVAR;
{$ENDIF}
{$ENDIF}

{$IFDEF LIBXML_HTML_ENABLED}
function __htmlDefaultSAXHandler: xmlSAXHandlerV1Ptr; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE htmlDefaultSAXHandler := __htmlDefaultSAXHandler()^ }
{$ELSE}
var
  htmlDefaultSAXHandler: xmlSAXHandlerV1; XMLPUBVAR;
{$ENDIF}
{$ENDIF}

function __xmlLastError: xmlErrorPtr; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlLastError := __xmlLastError()^ }
{$ELSE}
var
  xmlLastError: xmlError; XMLPUBVAR;
{$ENDIF}

(*
 * Everything starting from the line below is
 * Automatically generated by build_glob.py.
 * Do not modify the previous line.
 *)

function __oldXMLWDcompatibility: pcint; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE oldXMLWDcompatibility := __oldXMLWDcompatibility()^ }
{$ELSE}
var
  oldXMLWDcompatibility: cint; XMLPUBVAR;
{$ENDIF}

function __xmlBufferAllocScheme: xmlBufferAllocationSchemePtr; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlBufferAllocScheme := __xmlBufferAllocScheme()^ }
{$ELSE}
var
  xmlBufferAllocScheme: xmlBufferAllocationScheme; XMLPUBVAR;
{$ENDIF}
function xmlThrDefBufferAllocScheme(v: xmlBufferAllocationScheme): xmlBufferAllocationScheme; XMLCALL; XMLPUBFUN;

function __xmlDefaultBufferSize: pcint; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlDefaultBufferSize := __xmlDefaultBufferSize()^ }
{$ELSE}
var
  xmlDefaultBufferSize: cint; XMLPUBVAR;
{$ENDIF}
function xmlThrDefDefaultBufferSize(v: cint): cint; XMLCALL; XMLPUBFUN;

function __xmlDefaultSAXHandler: xmlSAXHandlerV1Ptr; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlDefaultSAXHandler := __xmlDefaultSAXHandler()^ }
{$ELSE}
var
  xmlDefaultSAXHandler: xmlSAXHandlerV1; XMLPUBVAR;
{$ENDIF}

function __xmlDefaultSAXLocator: xmlSAXLocatorPtr; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlDefaultSAXLocator := __xmlDefaultSAXLocator()^ }
{$ELSE}
var
  xmlDefaultSAXLocator: xmlSAXLocator; XMLPUBVAR;
{$ENDIF}

function __xmlDoValidityCheckingDefaultValue: pcint; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlDoValidityCheckingDefaultValue := __xmlDoValidityCheckingDefaultValue()^ }
{$ELSE}
var
  xmlDoValidityCheckingDefaultValue: cint; XMLPUBVAR;
{$ENDIF}
function xmlThrDefDoValidityCheckingDefaultValue(v: cint): cint; XMLCALL; XMLPUBFUN;

function __xmlGenericError: xmlGenericErrorFuncPtr; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlGenericError := __xmlGenericError()^ }
{$ELSE}
var
  xmlGenericError: xmlGenericErrorFunc; XMLPUBVAR;
{$ENDIF}

function __xmlStructuredError: xmlStructuredErrorFuncPtr; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlStructuredError := __xmlStructuredError()^ }
{$ELSE}
var
  xmlStructuredError: xmlStructuredErrorFunc; XMLPUBVAR;
{$ENDIF}

function __xmlGenericErrorContext: ppointer; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlGenericErrorContext := __xmlGenericErrorContext()^ }
{$ELSE}
var
  xmlGenericErrorContext: pointer; XMLPUBVAR;
{$ENDIF}

function __xmlGetWarningsDefaultValue: pcint; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlGetWarningsDefaultValue := __xmlGetWarningsDefaultValue()^ }
{$ELSE}
var
  xmlGetWarningsDefaultValue: cint; XMLPUBVAR;
{$ENDIF}
function xmlThrDefGetWarningsDefaultValue(v: cint): cint; XMLCALL; XMLPUBFUN;

function __xmlIndentTreeOutput: pcint; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlIndentTreeOutput := __xmlIndentTreeOutput()^ }
{$ELSE}
var
  xmlIndentTreeOutput: cint; XMLPUBVAR;
{$ENDIF}
function xmlThrDefIndentTreeOutput(v: cint): cint; XMLCALL; XMLPUBFUN;

function __xmlTreeIndentString: ppchar; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlTreeIndentString := __xmlTreeIndentString()^ }
{$ELSE}
var
  xmlTreeIndentString: pchar; XMLPUBVAR;
{$ENDIF}
function xmlThrDefTreeIndentString(v: pchar): pchar; XMLCALL; XMLPUBFUN;

function __xmlKeepBlanksDefaultValue: pcint; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlKeepBlanksDefaultValue := __xmlKeepBlanksDefaultValue()^ }
{$ELSE}
var
  xmlKeepBlanksDefaultValue: cint; XMLPUBVAR;
{$ENDIF}
function xmlThrDefKeepBlanksDefaultValue(v: cint): cint; XMLCALL; XMLPUBFUN;

function __xmlLineNumbersDefaultValue: pcint; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlLineNumbersDefaultValue := __xmlLineNumbersDefaultValue()^ }
{$ELSE}
var
  xmlLineNumbersDefaultValue: cint; XMLPUBVAR;
{$ENDIF}
function xmlThrDefLineNumbersDefaultValue(v: cint): cint; XMLCALL; XMLPUBFUN;

function __xmlLoadExtDtdDefaultValue: pcint; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlLoadExtDtdDefaultValue := __xmlLoadExtDtdDefaultValue()^ }
{$ELSE}
var
  xmlLoadExtDtdDefaultValue: cint; XMLPUBVAR;
{$ENDIF}
function xmlThrDefLoadExtDtdDefaultValue(v: cint): cint; XMLCALL; XMLPUBFUN;

function __xmlParserDebugEntities: pcint; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlParserDebugEntities := __xmlParserDebugEntities()^ }
{$ELSE}
var
  xmlParserDebugEntities: cint; XMLPUBVAR;
{$ENDIF}
function xmlThrDefParserDebugEntities(v: cint): cint; XMLCALL; XMLPUBFUN;

function __xmlParserVersion: ppchar; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlParserVersion := __xmlParserVersion()^ }
{$ELSE}
var
  xmlParserVersion: pchar; XMLPUBVAR;
{$ENDIF}

function __xmlPedanticParserDefaultValue: pcint; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlPedanticParserDefaultValue := __xmlPedanticParserDefaultValue()^ }
{$ELSE}
var
  xmlPedanticParserDefaultValue: cint; XMLPUBVAR;
{$ENDIF}
function xmlThrDefPedanticParserDefaultValue(v: cint): cint; XMLCALL; XMLPUBFUN;

function __xmlSaveNoEmptyTags: pcint; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlSaveNoEmptyTags := __xmlSaveNoEmptyTags()^ }
{$ELSE}
var
  xmlSaveNoEmptyTags: cint; XMLPUBVAR;
{$ENDIF}
function xmlThrDefSaveNoEmptyTags(v: cint): cint; XMLCALL; XMLPUBFUN;

function __xmlSubstituteEntitiesDefaultValue: pcint; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlSubstituteEntitiesDefaultValue := __xmlSubstituteEntitiesDefaultValue()^ }
{$ELSE}
var
  xmlSubstituteEntitiesDefaultValue: cint; XMLPUBVAR;
{$ENDIF}
function xmlThrDefSubstituteEntitiesDefaultValue(v: cint): cint; XMLCALL; XMLPUBFUN;

function __xmlRegisterNodeDefaultValue: xmlRegisterNodeFuncPtr; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlRegisterNodeDefaultValue := __xmlRegisterNodeDefaultValue()^ }
{$ELSE}
var
  xmlRegisterNodeDefaultValue: xmlRegisterNodeFunc; XMLPUBVAR;
{$ENDIF}

function __xmlDeregisterNodeDefaultValue: xmlDeregisterNodeFuncPtr; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlDeregisterNodeDefaultValue := __xmlDeregisterNodeDefaultValue()^ }
{$ELSE}
var
  xmlDeregisterNodeDefaultValue: xmlDeregisterNodeFunc; XMLPUBVAR;
{$ENDIF}

function __xmlParserInputBufferCreateFilenameValue: xmlParserInputBufferCreateFilenameFuncPtr; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlParserInputBufferCreateFilenameValue := __xmlParserInputBufferCreateFilenameValue()^ }
{$ELSE}
var
  xmlParserInputBufferCreateFilenameValue: xmlParserInputBufferCreateFilenameFunc; XMLPUBVAR;
{$ENDIF}

function __xmlOutputBufferCreateFilenameValue: xmlOutputBufferCreateFilenameFuncPtr; XMLCALL; XMLPUBFUN;
{$IFDEF LIBXML_THREAD_ENABLED}
{$DEFINE xmlOutputBufferCreateFilenameValue := __xmlOutputBufferCreateFilenameValue()^ }
{$ELSE}
var
  xmlOutputBufferCreateFilenameValue: xmlOutputBufferCreateFilenameFunc; XMLPUBVAR;
{$ENDIF}

{$ENDIF}
